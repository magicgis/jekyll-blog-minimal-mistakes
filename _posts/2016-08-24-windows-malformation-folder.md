---
layout: post
title: Windows 畸形文件夹
date: 2016-06-03 11:44:38
categories: 技术
tags: Windows
---

### 一、如何让一个文件夹无法删除，甚至无法打开？ 

以建一个"abc."文件夹为例（注意文件名中的点，正常情况下你是无法创建一个带点的文件名的文件夹的）： 

1、进入命令提示符，将当前工作目录切换到D盘，输入： 

D: 

回车，然后下输入： 

md abc..\ 

回车。 

2、你就会发现建成了一个"abc."的文件夹。 

3、这个文件夹双击打不开也删不掉，同时普通模式下也删不掉。 

4、那如何放文件进去呢？可以用COPY命令复制文件进去： copy 文件名 d:/abd../ 

5、那如何打开这个文件夹呢？在"运行"中输入完整的路径和文件夹的名称就行了，如：D:\abc..\ 

6、那如何删除呢？命令行下，将当前工作目录切换到D盘，并输入： 

rd /q /s abc..\ 

原理：用了windows的非法命名好处，这个是windows NT系列系统的bug，在dos或者win9x下就可以正常访问NT系统创建的这种文件夹，但不能创建此类文件夹。如果分区是NTFS格式，9X就无能为力了。病毒利用这个bug进行破坏，ghost工具则利用这个bug进行备份gho文件，非常了不起的是：ghost.exe在DOS下能发现这样的文件夹——兼容window NT的这个bug。 

### 二、再有一种文件夹是可以正常打开但不能删的： 

创建命令： 

md "D:/abc / " 

删除命令： 

rd /q /s "D:/abc / " 

注意：引号最好要有，还有空格，如："D:/abc空格/空格" 。 

### 三、再来个看不见的： 

创建命令： 

md D:/…/ 

删除命令： 

rd /q /s D:/…/ 

注意：这个文件夹在资源管理器里是看不见的，但命令提示符能看见。打开方式：运行（win+r）下输入D:/…/ 

注意：使用 rd /s /q D:/…/ 命令时，少个 . 会把D盘所有文件都删除了！输入命令时要小心谨慎呀！ 

### 四、另一种可以正常打开不能通过资源管理器删除的： 

创建命令： 

md "D:/ / " 

删除命令： 

rd /q /s "D:/ / " 

注意：引号最好要有，还有空格，如："D:/空格/空格" 。 

### 五、补充说明： 

1、如果你 md abc../ 建个 abc. 这样的非法文件夹。 再在资源管理器中建个abc的文件夹。原来的 abc. 就可以打开。不过看不到里面的文件。而且可以删除 abc. 文件夹。不过删了 abc. 文件夹的话。里面原来的文件会跑到后面建的 abc 文件夹里去。这个 abc 文件夹也会变得无法删除并且无法打开。 但如果在"运行"下输入 D:/abc../ 的话，还是可以看到里面的文件的。 abc. 文件夹和 abc 文件夹同时存在的时候,可以给 abc. 文件夹改名成abc文件夹。这时就同时存在两个 abc 文件夹。但如果你删除其中的一个文件夹,刷新后，还是会返回成 abc. 文件夹。在xp的命令行可以轻松建立这样删不掉的文件夹，可是在纯dos下却不行！ 

2、建一个不带"." 与带"." 的"bug文件夹"： 

（1）建立一个带"."文件夹，如： 

md abc../ 

（2）建立一个普通文件夹abc 

（3）普通方法删除带点的文件夹 

（4）后面留下的abc文件夹也是普通方法打不开,删不掉,同原 abc. 文件一样用,就是名称上看起来没"." 

3、再来伪装"bug文件夹"： 

（ 1）建abc.文件夹 

（2）copy命令复制文件进abc.文件夹 

（3）普通建abc文件夹 

（4）此时可以打开abc.与abc，且两文件夹似乎使用的是同样的磁盘空间，普通方法复制进其中一个文件夹，另一个文件夹会有同样的文件出现。但是在第2步中copy进文件夹的文件不会显示。 

（ 5）两个文件都可以用普通方法删除，但是不管是删除哪个(abc.或是abc)，剩下的那个文件夹(abc或是abc.)与第1步中建立的abc.具有相同功能，普通方法不能打开，不能删除。 

所以，可以建立名称如同普通文件夹一样的"bug文件夹"（只是名称看起来一样而已），可以把一些想保护起来的文件放到里面，免于误删，被该等问题。 

### 六、一些有意思的现象： 

1、如果把文件拖到这个abc.文件夹里。那么，他马上会生成个abc（同名文件夹），并且拖进去的文件可见，但是见不到之前用在运行下输入 D:/abc../ 复制进去的文件。并且，如果在拖进文件之后用在运行下输入 D:/abc../ 进去看。是看不到拖进去的文件的。把这两个同名的文件夹删掉其中之一后，用在运行下输入 D:/abc../ 进去看，还是看不到拖进去的文件。 

2、我们可以先建立一个如abc的文件夹，再把其设为隐藏属性，然后再利用winrar这个软件来对其文件夹命名为abc../ 。至此大功告成，其文件夹达到一般不可删除，隐藏的的功能。再把文件夹选项设为不显示隐藏文件。 

3、现在只是在windows 2000里运行里用 abc../ 进入不了文件夹，在xp里就可以进入。 

4、在NTFS分区下，资源管理器看不见的这个目录。分区必须是FAT32格式，NTFS是无法建立的。 

5、其实分区里面abc.文件是可以删除的，注意是文件不是文件夹。方法如下： 用 dir/x 命令来获取畸形文件的短文件名，再用del命令来删除。

### 七、特别需要注意的情况

部分网站服务器目录中出现了大量的畸形文件夹，那么就需要注意了，这是黑客留的后门程序都在里面了，一定要删除了，如果手工删除少了还可以，如果几千了文件，就需要用批量删除程序了